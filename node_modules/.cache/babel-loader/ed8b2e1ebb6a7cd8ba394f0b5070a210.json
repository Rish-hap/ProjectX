{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/ajoncode/Rish-hap/ProjectX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _objectSpread from\"/home/ajoncode/Rish-hap/ProjectX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/ajoncode/Rish-hap/ProjectX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ajoncode/Rish-hap/ProjectX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ajoncode/Rish-hap/ProjectX/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  :hover {\\n    cursor: pointer;\\n  }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useEffect}from'react';import Web3 from'web3';import'./App.css';import'./sass/main.scss';import'antd/dist/antd.css';import Home from\"./Containers/Home\";import Farming from\"./Containers/Farming\";import Reward from\"./Containers/Reward\";import Staking from\"./Containers/Staking\";import{Route,Switch,Redirect,BrowserRouter as Router}from'react-router-dom';import Header from\"./Components/Header\";import fessABI from'./utils/fessABI';import fnirABI from'./utils/fnirABI';import{contractDeployedNetwork,fessContractAddress,fnirContractAddress}from'./utils/config';import{TIMEOUT,NOT_INSTALLED,LOCKED}from'./metamask/constants';import styled from'styled-components';import{ImWarning}from'react-icons/im';import{GiCrossMark}from'react-icons/gi';import{MetamaskProvider}from'./contexts/metamask';function App(props){var _React$useState=React.useState({ethereumAddress:null,fessContractInstance:null,fnirContractInstance:null,web3Instance:null,metamaskError:null}),_React$useState2=_slicedToArray(_React$useState,2),metamaskContextValue=_React$useState2[0],setMetamaskContextValue=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),fnirBalance=_React$useState4[0],setFnirBalance=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),fnirTotalSupply=_React$useState6[0],setFnirTotalSupply=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),fessBalance=_React$useState8[0],setFessBalance=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),networkError=_React$useState10[0],setNetworkError=_React$useState10[1];var chainedWeb3=window.ethereum;if(chainedWeb3){chainedWeb3.on('networkChanged',function(networkId){console.log('networkChanged -> networkId -> ',networkId);// handle the new network\nresetApp();window.location.reload();});chainedWeb3.on('accountsChanged',function(account){console.log('accountsChanged -> account -> ',account);// handle the new account\nresetApp();});}var resetApp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var metamaskError,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metamaskError=_args.length>0&&_args[0]!==undefined?_args[0]:null;if(!(metamaskContextValue.web3Instance&&metamaskContextValue.web3Instance.currentProvider&&metamaskContextValue.web3Instance.currentProvider.close)){_context.next=4;break;}_context.next=4;return metamaskContextValue.web3Instance.currentProvider.close();case 4:setMetamaskContextValue({ethereumAddress:null,fessContractInstance:null,fnirContractInstance:null,web3Instance:null,metamaskError:metamaskError});case 5:case\"end\":return _context.stop();}}},_callee);}));return function resetApp(){return _ref.apply(this,arguments);};}();var loadBlockChain=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var error,web3,network,accounts,contractFESS,contractFNIR;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:error=typeof window!=='undefined'&&Boolean(window.ethereum||window.web3);error?console.log('NO ERROR'):resetApp(NOT_INSTALLED);_context2.prev=2;window.web3=new window.Web3(window.ethereum);_context2.next=6;return window.ethereum.enable();case 6:_context2.next=8;return new Web3(window.web3.currentProvider);case 8:web3=_context2.sent;_context2.next=11;return web3.eth.net.getNetworkType();case 11:network=_context2.sent;console.log('Network: ',network);if(!(network===contractDeployedNetwork.toLowerCase())){_context2.next=24;break;}console.log('web3: ',web3);_context2.next=17;return web3.eth.getAccounts();case 17:accounts=_context2.sent;contractFESS=new web3.eth.Contract(fessABI,fessContractAddress);contractFNIR=new web3.eth.Contract(fnirABI,fnirContractAddress);setMetamaskContextValue(_objectSpread(_objectSpread({},metamaskContextValue),{},{ethereumAddress:accounts[0],fessContractInstance:contractFESS,fnirContractInstance:contractFNIR,web3Instance:web3}));setNetworkError(false);_context2.next=26;break;case 24:setNetworkError(true);resetApp(\"Please switch your metamask network to \".concat(contractDeployedNetwork.toUpperCase()));case 26:_context2.next=31;break;case 28:_context2.prev=28;_context2.t0=_context2[\"catch\"](2);console.log('error catch: ',_context2.t0);case 31:case\"end\":return _context2.stop();}}},_callee2,null,[[2,28]]);}));return function loadBlockChain(){return _ref2.apply(this,arguments);};}();var handleConnectMetamask=function handleConnectMetamask(){loadBlockChain();};React.useEffect(function(){handleConnectMetamask();},[]);var authObject=function authObject(){return{isAuthenticated:!!localStorage.getItem('token')};};var getFnirBalance=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var fnirBalanceValue;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return metamaskContextValue.fnirContractInstance.methods.balanceOf(metamaskContextValue.ethereumAddress).call();case 3:fnirBalanceValue=_context3.sent;setFnirBalance((Number(fnirBalanceValue)/Math.pow(10,18)).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:4}));console.log('getFnirBalance: fnirBalanceValue: ',fnirBalanceValue);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log('App -> getFnirBalance: err: ',_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function getFnirBalance(){return _ref3.apply(this,arguments);};}();var getFnirTotalSupply=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var totalSupply;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return metamaskContextValue.fnirContractInstance.methods.totalSupply().call();case 3:totalSupply=_context4.sent;setFnirTotalSupply((Number(totalSupply)/Math.pow(10,18)).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:4}));console.log('getFnirTotalSupply: totalSupply: ',totalSupply);_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log('App -> getFnirTotalSupply: err: ',_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function getFnirTotalSupply(){return _ref4.apply(this,arguments);};}();var getFessBalance=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var fessBalanceValue;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return metamaskContextValue.fessContractInstance.methods.balanceOf(metamaskContextValue.ethereumAddress).call();case 3:fessBalanceValue=_context5.sent;setFessBalance((Number(fessBalanceValue)/Math.pow(10,18)).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:4}));console.log('fessBalanceValue: ',fessBalanceValue);_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);console.log('App -> getFessBalance: err: ',_context5.t0);case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function getFessBalance(){return _ref5.apply(this,arguments);};}();React.useEffect(function(){if(metamaskContextValue.fessContractInstance&&metamaskContextValue.fnirContractInstance){getFnirBalance();getFnirTotalSupply();getFessBalance();}},[metamaskContextValue.fessContractInstance,metamaskContextValue.fnirContractInstance]);console.log('metamaskContextValue: ',metamaskContextValue);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:networkError?'PhishAlertActive':'PhishAlert'},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(ImWarning,{style:{marginRight:6},size:15}),/*#__PURE__*/React.createElement(\"span\",{className:\"alertSpan\"},\"Make sure the Metamask Network is\",' ',contractDeployedNetwork.toUpperCase())),/*#__PURE__*/React.createElement(StyledClose,{size:15,onClick:function onClick(){return setNetworkError(false);}})),/*#__PURE__*/React.createElement(MetamaskProvider,{value:metamaskContextValue},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Header,{ethereumAddress:metamaskContextValue.ethereumAddress,handleConnectMetamask:handleConnectMetamask}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Redirect,{exact:true,from:\"/\",to:\"/home\"}),/*#__PURE__*/React.createElement(Route,{path:\"/home\",component:function component(){return/*#__PURE__*/React.createElement(Home,{fnirBalance:fnirBalance,fnirTotalSupply:fnirTotalSupply,fessBalance:fessBalance});}}),/*#__PURE__*/React.createElement(Route,{path:\"/farming\",component:function component(){return/*#__PURE__*/React.createElement(Farming,{fnirBalance:fnirBalance,getFnirBalance:getFnirBalance,getFessBalance:getFessBalance,fessBalance:fessBalance});}}),/*#__PURE__*/React.createElement(Route,{path:\"/reward\",component:function component(){return/*#__PURE__*/React.createElement(Reward,null);}}),/*#__PURE__*/React.createElement(Route,{path:\"/staking\",component:function component(){return/*#__PURE__*/React.createElement(Staking,null);}})))));}var mapStateToProps=function mapStateToProps(state){return{user:state};};export default App;export var StyledClose=styled(GiCrossMark)(_templateObject());","map":{"version":3,"sources":["/home/ajoncode/Rish-hap/ProjectX/src/App.js"],"names":["React","useEffect","Web3","Home","Farming","Reward","Staking","Route","Switch","Redirect","BrowserRouter","Router","Header","fessABI","fnirABI","contractDeployedNetwork","fessContractAddress","fnirContractAddress","TIMEOUT","NOT_INSTALLED","LOCKED","styled","ImWarning","GiCrossMark","MetamaskProvider","App","props","useState","ethereumAddress","fessContractInstance","fnirContractInstance","web3Instance","metamaskError","metamaskContextValue","setMetamaskContextValue","fnirBalance","setFnirBalance","fnirTotalSupply","setFnirTotalSupply","fessBalance","setFessBalance","networkError","setNetworkError","chainedWeb3","window","ethereum","on","networkId","console","log","resetApp","location","reload","account","currentProvider","close","loadBlockChain","error","Boolean","web3","enable","eth","net","getNetworkType","network","toLowerCase","getAccounts","accounts","contractFESS","Contract","contractFNIR","toUpperCase","handleConnectMetamask","authObject","isAuthenticated","localStorage","getItem","getFnirBalance","methods","balanceOf","call","fnirBalanceValue","Number","Math","pow","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","getFnirTotalSupply","totalSupply","getFessBalance","fessBalanceValue","display","marginRight","mapStateToProps","state","user","StyledClose"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport Web3 from 'web3';\n\nimport './App.css';\nimport './sass/main.scss';\nimport 'antd/dist/antd.css';\nimport Home from \"./Containers/Home\"\nimport Farming from \"./Containers/Farming\"\nimport Reward from \"./Containers/Reward\"\nimport Staking from \"./Containers/Staking\"\nimport {  Route, Switch, Redirect,  BrowserRouter as Router } from 'react-router-dom'\nimport Header from \"./Components/Header\"\nimport fessABI from './utils/fessABI';\nimport fnirABI from './utils/fnirABI';\nimport {\n  contractDeployedNetwork,\n  fessContractAddress,\n  fnirContractAddress\n} from './utils/config';\nimport { TIMEOUT, NOT_INSTALLED, LOCKED } from './metamask/constants';\n\nimport styled from 'styled-components';\n\nimport { ImWarning } from 'react-icons/im';\nimport { GiCrossMark } from 'react-icons/gi';\n\nimport { MetamaskProvider } from './contexts/metamask';\n\nfunction App(props) {\n  const [metamaskContextValue, setMetamaskContextValue] = React.useState({\n    ethereumAddress: null,\n    fessContractInstance: null,\n    fnirContractInstance: null,\n    web3Instance: null,\n    metamaskError: null,\n  });\n\n  const [fnirBalance, setFnirBalance] = React.useState(0);\n  const [fnirTotalSupply, setFnirTotalSupply] = React.useState(0);\n  const [fessBalance, setFessBalance] = React.useState(0);\n\n  const [networkError, setNetworkError] = React.useState(false);\n  const chainedWeb3 = window.ethereum;\n\n  if (chainedWeb3) {\n    chainedWeb3.on('networkChanged', networkId => {\n      console.log('networkChanged -> networkId -> ', networkId);\n      // handle the new network\n      resetApp();\n      window.location.reload();\n    });\n\n    chainedWeb3.on('accountsChanged', account => {\n      console.log('accountsChanged -> account -> ', account);\n      // handle the new account\n      resetApp();\n    });\n  }\n\n  const resetApp = async (metamaskError = null) => {\n    if (\n      metamaskContextValue.web3Instance &&\n      metamaskContextValue.web3Instance.currentProvider &&\n      metamaskContextValue.web3Instance.currentProvider.close\n    ) {\n      await metamaskContextValue.web3Instance.currentProvider.close();\n    }\n    setMetamaskContextValue({\n      ethereumAddress: null,\n      fessContractInstance: null,\n      fnirContractInstance: null,\n      web3Instance: null,\n      metamaskError,\n    });\n  };\n\n\n\n  const loadBlockChain = async () => {\n    const error =\n      typeof window !== 'undefined' && Boolean(window.ethereum || window.web3);\n\n    error ? console.log('NO ERROR') : resetApp(NOT_INSTALLED);\n\n    try {\n      window.web3 = new window.Web3(window.ethereum);\n      await window.ethereum.enable();\n      const web3 = await new Web3(window.web3.currentProvider);\n      const network = await web3.eth.net.getNetworkType();\n      console.log('Network: ', network);\n\n      if (network === contractDeployedNetwork.toLowerCase()) {\n        console.log('web3: ', web3);\n        const accounts = await web3.eth.getAccounts();\n        const contractFESS = new web3.eth.Contract(\n          fessABI,\n          fessContractAddress,\n        );\n\n        const contractFNIR = new web3.eth.Contract(\n          fnirABI,\n          fnirContractAddress,\n        );\n\n\n        setMetamaskContextValue({\n          ...metamaskContextValue,\n          ethereumAddress: accounts[0],\n          fessContractInstance: contractFESS,\n          fnirContractInstance: contractFNIR,\n          web3Instance: web3,\n        });\n        setNetworkError(false);\n      } else {\n        setNetworkError(true);\n        resetApp(\n          `Please switch your metamask network to ${contractDeployedNetwork.toUpperCase()}`,\n        );\n      }\n    } catch (err) {\n      console.log('error catch: ', err);\n    }\n  };\n\n  const handleConnectMetamask = () => {\n    loadBlockChain();\n  };\n\n  React.useEffect(() => {\n    handleConnectMetamask()\n  }, []);\n\n\n  const authObject =()=> {\n    return {\n     isAuthenticated: !!localStorage.getItem('token')\n    }\n }\n\n const getFnirBalance = async () => {\n  try {\n    const fnirBalanceValue = await metamaskContextValue.fnirContractInstance.methods\n      .balanceOf(\n        metamaskContextValue.ethereumAddress\n      )\n      .call();\n\n      setFnirBalance((\n        Number(fnirBalanceValue) / Math.pow(10, 18)\n      ).toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 4,\n      }))\n\n      console.log('getFnirBalance: fnirBalanceValue: ', fnirBalanceValue)\n  } catch (err) {\n    console.log('App -> getFnirBalance: err: ', err);\n  }\n}\n\nconst getFnirTotalSupply = async () => {\n  try {\n    const totalSupply = await metamaskContextValue.fnirContractInstance.methods\n      .totalSupply()\n      .call();\n\n      setFnirTotalSupply((\n        Number(totalSupply) / Math.pow(10, 18)\n      ).toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 4,\n      }))\n\n      console.log('getFnirTotalSupply: totalSupply: ', totalSupply)\n  } catch (err) {\n    console.log('App -> getFnirTotalSupply: err: ', err);\n  }\n}\n\nconst getFessBalance = async () => {\n  try {\n    const fessBalanceValue = await metamaskContextValue.fessContractInstance.methods\n      .balanceOf(\n        metamaskContextValue.ethereumAddress\n      )\n      .call();\n\n      setFessBalance((\n        Number(fessBalanceValue) / Math.pow(10, 18)\n      ).toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 4,\n      }))\n\n      console.log('fessBalanceValue: ', fessBalanceValue)\n  } catch (err) {\n    console.log('App -> getFessBalance: err: ', err);\n  }\n}\n\n React.useEffect(() => {\n  if (\n    metamaskContextValue.fessContractInstance &&\n    metamaskContextValue.fnirContractInstance\n  ) {\n  getFnirBalance();\n  getFnirTotalSupply();\n  getFessBalance();\n  }\n}, [metamaskContextValue.fessContractInstance,\n  metamaskContextValue.fnirContractInstance])\n\n console.log('metamaskContextValue: ', metamaskContextValue)\n  return (\n      <React.Fragment>\n         <div className={networkError ? 'PhishAlertActive' : 'PhishAlert'}>\n            <div style={{ display: 'flex' }}>\n              <ImWarning style={{ marginRight: 6 }} size={15} />\n              <span className=\"alertSpan\">\n                Make sure the Metamask Network is{' '}\n                {contractDeployedNetwork.toUpperCase()}\n              </span>\n            </div>\n            <StyledClose size={15} onClick={() => setNetworkError(false)} />\n          </div>\n        <MetamaskProvider value={metamaskContextValue}>\n         <Router>\n         <Header ethereumAddress={metamaskContextValue.ethereumAddress} handleConnectMetamask={handleConnectMetamask}/>\n          <Switch>\n            <Redirect exact from=\"/\" to=\"/home\" />\n            <Route  path =\"/home\" component={()=> <Home  fnirBalance={fnirBalance} fnirTotalSupply={fnirTotalSupply} fessBalance={fessBalance}/>}/>\n            <Route  path =\"/farming\" component={()=><Farming fnirBalance={fnirBalance} getFnirBalance={getFnirBalance} getFessBalance={getFessBalance} fessBalance={fessBalance} />}/>\n            <Route  path =\"/reward\" component={()=><Reward />}/>\n            <Route  path =\"/staking\" component={()=><Staking />}/>\n          </Switch>\n      </Router>\n      </MetamaskProvider>\n      </React.Fragment>\n  )\n\n}\n\nconst mapStateToProps = state => ({\n  user: state\n})\n\nexport default App\n\nexport const StyledClose = styled(GiCrossMark)`\n  :hover {\n    cursor: pointer;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}